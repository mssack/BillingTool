<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					xmlns:local="clr-namespace:BillingTool.Themes.Controls"
					xmlns:bonVisuals="clr-namespace:BillingOutput.Controls.BonVisuals;assembly=BillingOutput"
					xmlns:billingDatabaseDb="SqlCeDatabases.BillingDatabase"
					xmlns:extensions="clr-namespace:BillingDataAccess.sqlcedatabases.billingdatabase._Extensions;assembly=BillingDataAccess">
	<ResourceDictionary.MergedDictionaries>
		<ResourceDictionary Source="/CsWpfBase;component/Themes/Controls/_shared/Styles.xaml" />
		<ResourceDictionary Source="/BillingTool;component/Themes/Styles/uitext/BelegData.xaml" />
		<ResourceDictionary Source="/BillingTool;component/Themes/Styles/uitext/MailedBeleg.xaml" />
		<ResourceDictionary Source="/BillingTool;component/Themes/Styles/uitext/PrintedBeleg.xaml" />
		<ResourceDictionary Source="/BillingTool;component/Themes/GenerelStyles.xaml" />
	</ResourceDictionary.MergedDictionaries>


	<Style TargetType="{x:Type local:BelegDataView}">
		<Setter Property="Margin" Value="10" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:BelegDataView}">
					<Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
							BorderThickness="{TemplateBinding BorderThickness}" DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Item}">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>
								<Grid Grid.Row="0" Margin="0,0,0,10">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*" />
										<ColumnDefinition Width="*" />
									</Grid.ColumnDefinitions>
									<Expander Grid.Column="0" Header="Ausstellungs-Details" IsExpanded="True" Margin="0">
										<Border>
											<Grid>
												<Grid.RowDefinitions>
													<RowDefinition Height="Auto" />
													<RowDefinition Height="Auto" />
													<RowDefinition Height="Auto" />
													<RowDefinition Height="Auto" />
													<RowDefinition Height="Auto" />
												</Grid.RowDefinitions>
												<ParamView Grid.Row="0" Header="{StaticResource Bez-BelegData-Datum}" Value="{Binding Path=Datum}" />
												<ParamView Grid.Row="1" Header="{StaticResource Bez-BelegData-Nummer}" Value="{Binding Path=Nummer}" />
												<ParamView Grid.Row="2" Header="{StaticResource Bez-BelegData-Typ}"
															Value="{Binding Path=Typ, Converter={StaticResource GConv-GetEnumName}}" />
												<ParamView Grid.Row="3" Header="{StaticResource Bez-BelegData-KassenId}" Value="{Binding Path=KassenId}" />
												<ParamView Grid.Row="4" Header="{StaticResource Bez-BelegData-KassenOperator}" Value="{Binding Path=KassenOperator}" />
											</Grid>
										</Border>
									</Expander>
									<Grid Grid.Column="1" Margin="10,0,0,0">
										<Grid.Style>
											<Style TargetType="{x:Type Grid}">
												<Style.Triggers>
													<DataTrigger Binding="{Binding Path=Typ}" Value="{x:Static extensions:BelegDataTypes.Storno}">
														<Setter Property="Visibility" Value="Collapsed" />
													</DataTrigger>
												</Style.Triggers>
											</Style>
										</Grid.Style>
										<Grid.RowDefinitions>
											<RowDefinition Height="Auto" />
											<RowDefinition Height="Auto" />
										</Grid.RowDefinitions>
										<Expander Header="Status" IsExpanded="True">
											<Border>
												<Grid>
													<Grid.RowDefinitions>
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
													</Grid.RowDefinitions>
													<ParamView Grid.Row="1" Header="{StaticResource Bez-BelegData-State}"
																Value="{Binding Path=State, Converter={StaticResource GConv-GetEnumName}}" />
													<ParamView Grid.Row="2" Header="{StaticResource Bez-BelegData-MailCount}" Value="{Binding Path=MailCount}" />
													<ParamView Grid.Row="3" Header="{StaticResource Bez-BelegData-PrintCount}" Value="{Binding Path=PrintCount}" />
												</Grid>
											</Border>
										</Expander>
										<Expander Grid.Row="1" Header="Empfänger" IsExpanded="True">
											<Border>
												<Grid>
													<Grid.RowDefinitions>
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
													</Grid.RowDefinitions>
													<ParamView Grid.Row="0" Header="{StaticResource Bez-BelegData-EmpfängerId}" Value="{Binding Path=EmpfängerId}" />
													<ParamView Grid.Row="1" Header="{StaticResource Bez-BelegData-Empfänger}" Value="{Binding Path=Empfänger}" />
												</Grid>
											</Border>
										</Expander>


									</Grid>
									<Grid Grid.Column="1" Margin="10,0,0,0">
										<Grid.Style>
											<Style TargetType="{x:Type Grid}">
												<Setter Property="Visibility" Value="Collapsed" />
												<Style.Triggers>
													<DataTrigger Binding="{Binding Path=Typ}" Value="{x:Static extensions:BelegDataTypes.Storno}">
														<Setter Property="Visibility" Value="Visible" />
													</DataTrigger>
												</Style.Triggers>
											</Style>
										</Grid.Style>
										<Grid.RowDefinitions>
											<RowDefinition Height="Auto" />
											<RowDefinition Height="Auto" />
										</Grid.RowDefinitions>
										<Expander Header="Storno Beleg" IsExpanded="True">
											<Border>
												<Grid>
													<Grid.RowDefinitions>
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
														<RowDefinition Height="Auto" />
													</Grid.RowDefinitions>
													<ParamView Grid.Row="0" Header="{StaticResource Bez-BelegData-Nummer}" Value="{Binding Path=StornoBeleg.Nummer}" />
													<ParamView Grid.Row="1" Header="{StaticResource Bez-BelegData-Datum}" Value="{Binding Path=StornoBeleg.Datum}" />
													<ParamView Grid.Row="2" Header="{StaticResource Bez-BelegData-StornoReason}" Value="{Binding Path=Comment}" />
												</Grid>
											</Border>
										</Expander>
									</Grid>
								</Grid>
								<Expander Grid.Row="1" Header="Artikel" IsExpanded="True" Padding="0">
									<ListView Margin="0" Padding="0">
										<ListView.Style>
											<Style TargetType="ListView" BasedOn="{StaticResource CondensedListViewStyle}">
												<Style.Triggers>
													<Trigger Property="IsVisible" Value="True">
														<Setter Property="ItemsSource" Value="{Binding Path=Postens}" />
													</Trigger>
												</Style.Triggers>
											</Style>
										</ListView.Style>
										<ListView.ItemContainerStyle>
											<Style TargetType="ListViewItem" BasedOn="{StaticResource CondensedListViewItemStyle}">
												<Setter Property="Focusable" Value="false" />
											</Style>
										</ListView.ItemContainerStyle>
										<ListView.View>
											<GridView>
												<GridViewColumn Header="Name">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:BelegPosten}">
															<TextBlock>
																<TextBlock.Text>
																	<MultiBinding StringFormat="{}{0} ({1:0.00} €)">
																		<Binding Path="Posten.Name" />
																		<Binding Path="Posten.PreisBrutto" />
																	</MultiBinding>
																</TextBlock.Text>
															</TextBlock>
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="Anzahl">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:BelegPosten}">
															<TextBlock TextAlignment="Right">
																<TextBlock.Text>
																	<MultiBinding StringFormat="{}{0} {1}">
																		<Binding Path="Anzahl" />
																		<Binding Path="Posten.Dimension" />
																	</MultiBinding>
																</TextBlock.Text>
															</TextBlock>
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="Steuersatz">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:BelegPosten}">
															<TextBlock TextAlignment="Right">
																<TextBlock.Text>
																	<MultiBinding StringFormat="{}{0:0.00} % ({1})">
																		<Binding Path="Steuersatz.Percent" />
																		<Binding Path="Steuersatz.Kürzel" />
																	</MultiBinding>
																</TextBlock.Text>
															</TextBlock>
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="Brutto">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:BelegPosten}">
															<TextBlock TextAlignment="Right" Text="{Binding Path=BetragBrutto, StringFormat={}{0:0.00} €}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="Netto">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:BelegPosten}">
															<TextBlock TextAlignment="Right" Text="{Binding Path=BetragNetto, StringFormat={}{0:0.00} €}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
											</GridView>
										</ListView.View>
									</ListView>
								</Expander>
								<Expander Grid.Row="2" Header="Mails" IsExpanded="False" Padding="0">
									<Expander.Style>
										<Style TargetType="{x:Type Expander}" BasedOn="{StaticResource {x:Type Expander}}">
											<Style.Triggers>
												<DataTrigger Binding="{Binding Path=Typ}" Value="{x:Static extensions:BelegDataTypes.Storno}">
													<Setter Property="Visibility" Value="Collapsed" />
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</Expander.Style>
									<ListView Margin="0" Padding="0">
										<ListView.Style>
											<Style TargetType="ListView" BasedOn="{StaticResource CondensedListViewStyle}">
												<Style.Triggers>
													<Trigger Property="IsVisible" Value="True">
														<Setter Property="ItemsSource" Value="{Binding Path=MailedBelege}" />
													</Trigger>
												</Style.Triggers>
											</Style>
										</ListView.Style>
										<ListView.View>
											<GridView>
												<GridViewColumn Header="{StaticResource Bez-MailedBeleg-ProcessingState}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:MailedBeleg}">
															<Grid>
																<Grid.ColumnDefinitions>
																	<ColumnDefinition Width="Auto" />
																	<ColumnDefinition Width="Auto" />
																</Grid.ColumnDefinitions>
																<Image DataContext="{Binding Path=ProcessingState}" Style="{StaticResource ProcessingStateIcon}" />
																<TextBlock Grid.Column="1" Text="{Binding Path=ProcessingState, Converter={StaticResource GConv-GetEnumName}}" />
															</Grid>
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-MailedBeleg-ProcessingDate}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:MailedBeleg}">
															<TextBlock Text="{Binding Path=ProcessingDate}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-MailedBeleg-OutputFormat}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:MailedBeleg}">
															<TextBlock Text="{Binding Path=OutputFormat.Name}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-MailedBeleg-TargetMailAddress}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:MailedBeleg}">
															<TextBlock Text="{Binding Path=TargetMailAddress}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-MailedBeleg-Betreff}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:MailedBeleg}">
															<TextBlock Text="{Binding Path=Betreff}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-MailedBeleg-Text}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:MailedBeleg}">
															<PopupButton>
																<PopupButton.Content>
																	<TextBlock Text="{Binding Path=Text}" TextTrimming="CharacterEllipsis" />
																</PopupButton.Content>
																<PopupButton.PopupContent>
																	<TextBox IsReadOnly="True" Text="{Binding Path=Text}" />
																</PopupButton.PopupContent>
															</PopupButton>
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
											</GridView>
										</ListView.View>
									</ListView>

								</Expander>
								<Expander Grid.Row="3" Header="Ausdrücke" IsExpanded="False" Padding="0">
									<Expander.Style>
										<Style TargetType="{x:Type Expander}" BasedOn="{StaticResource {x:Type Expander}}">
											<Style.Triggers>
												<DataTrigger Binding="{Binding Path=Typ}" Value="{x:Static extensions:BelegDataTypes.Storno}">
													<Setter Property="Visibility" Value="Collapsed" />
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</Expander.Style>
									<ListView Margin="0" Padding="0">
										<ListView.Style>
											<Style TargetType="ListView" BasedOn="{StaticResource CondensedListViewStyle}">
												<Style.Triggers>
													<Trigger Property="IsVisible" Value="True">
														<Setter Property="ItemsSource" Value="{Binding Path=PrintedBelege}" />
													</Trigger>
												</Style.Triggers>
											</Style>
										</ListView.Style>
										<ListView.View>
											<GridView>
												<GridViewColumn Header="{StaticResource Bez-PrintedBeleg-ProcessingStateName}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:PrintedBeleg}">
															<Grid>
																<Grid.ColumnDefinitions>
																	<ColumnDefinition Width="Auto" />
																	<ColumnDefinition Width="Auto" />
																</Grid.ColumnDefinitions>
																<Image DataContext="{Binding Path=ProcessingState}" Style="{StaticResource ProcessingStateIcon}" />
																<TextBlock Grid.Column="1" Text="{Binding Path=ProcessingState, Converter={StaticResource GConv-GetEnumName}}" />
															</Grid>
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-PrintedBeleg-ProcessingDate}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:PrintedBeleg}">
															<TextBlock Text="{Binding Path=ProcessingDate}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-PrintedBeleg-OutputFormat}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:PrintedBeleg}">
															<TextBlock Text="{Binding Path=OutputFormat.Name}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
												<GridViewColumn Header="{StaticResource Bez-PrintedBeleg-PrinterDevice}">
													<GridViewColumn.CellTemplate>
														<DataTemplate DataType="{x:Type billingDatabaseDb:PrintedBeleg}">
															<TextBlock Text="{Binding Path=PrinterDevice}" />
														</DataTemplate>
													</GridViewColumn.CellTemplate>
												</GridViewColumn>
											</GridView>
										</ListView.View>
									</ListView>
								</Expander>
							</Grid>

							<Grid Grid.Column="1" Margin="10,0,0,0">
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>
								<Border Style="{StaticResource RedBorder}" Padding="3" Margin="0,0,0,10"
										Visibility="{Binding Path=IsStorniert, Converter={StaticResource GConv-BoolVisibility}}">
									<Grid>
										<Grid.RowDefinitions>
											<RowDefinition Height="Auto" />
											<RowDefinition Height="Auto" />
										</Grid.RowDefinitions>
										<TextBlock Text="Storniert" Foreground="White" FontSize="16" TextAlignment="Center" Margin="0" Padding="0" />
										<Border Grid.Row="1" Margin="0,3,0,0" Background="White" BorderThickness="1" BorderBrush="WhiteSmoke" Padding="2">
											<TextBlock TextWrapping="Wrap"
														MaxWidth="{Binding ElementName=RechnungsView, Path=ActualWidth, Converter={StaticResource GConv-PercentOf}, ConverterParameter=0.9}">
												<TextBlock.Text>
													<MultiBinding StringFormat="{}Am {0} durch {1} (Belegnummer = {2}): '{3}'">
														<Binding Path="StornierenderBeleg.Datum" />
														<Binding Path="StornierenderBeleg.KassenOperator" />
														<Binding Path="StornierenderBeleg.Nummer" />
														<Binding Path="StornierenderBeleg.Comment" />
													</MultiBinding>
												</TextBlock.Text>
											</TextBlock>
										</Border>
									</Grid>
								</Border>
								<Expander Grid.Row="1" Header="Rechnungsansicht" IsExpanded="True" Padding="0" >
									<local:BonPreviewControl Item="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Item}"/>
								</Expander>
								<UniformGrid Grid.Row="2">
									<Button Style="{StaticResource CancleButton}" Content="Stornieren" x:Name="PART_StornoButton"
											Visibility="{Binding Path=CanBeStorniert, Converter={StaticResource GConv-BoolVisibility}}" />
									<Button Content="Erneut Senden" x:Name="PART_ErneutSendenButton" />
									<Button Content="Erneut Drucken" x:Name="PART_ErneutDruckenButton" />
								</UniformGrid>
							</Grid>
						</Grid>
					</Border>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
</ResourceDictionary>